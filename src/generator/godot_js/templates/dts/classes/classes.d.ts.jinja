{%- set inherits = class['inherits'] -%}
{%- if inherits == 'Object'%}
  {%- set inherits = 'GodotObject' -%}
{%- endif %}

{%- macro extends(class) -%}
{%- if inherits -%}
 extends {{inherits}}
{%- endif -%}
{%- endmacro -%}

{%- set class_name = class['name'] -%}
{%- if class_name == 'Object'%}
  {%- set class_name = 'GodotObject' -%}
{%- endif %}

{%- for den in dependency %}
  {%- if den == 'Object' %}
    {%- set den = 'GodotObject' %}
    {%- if den != class_name %}
import { {{den}} } from "@godot/classes/{{camel_to_snake(den)}}";
    {%- endif %}
  {%- else %}
    {%- if den != class_name %}
import { {{den}} } from "@godot/classes/{{camel_to_snake(den)}}";
    {%- endif %}
  {%- endif %}
{%- endfor %}

export declare class {{class_name}} {{extends(class)}}{
  {%- for method in class['methods'] %}
  public {{method['name']}}({{connect_args(method['arguments'])}}){{set_return(method['return_value']['type'] if method['return_value'] else None)}};
  {%- endfor %}
  {%- for prop in class['properties'] %}
  {%- if prop['getter'] %}
  public get {{prop['name']}}(){{set_return(prop['type'])}} {
    {{prop['getter']}}();
  }
  {%- endif %}
  {%- if prop['setter'] %}
  public set {{prop['name']}}(value): void {
    {{prop['setter']}}(value);
  }
  {%- endif %}
  {%- endfor %}
  {%- for enum in class['enums'] %}
  static {{enum['name']}} = {
    {%- for value in enum['values'] %}
    {{value['name']}} = {{value['value']}},
    {%- endfor %}
  }
  {%- endfor %}
  {%- for signal in class['signals'] %}
  public const {{signal['name']}}: string = "{{signal['name']}}";
  {%- endfor %}
}